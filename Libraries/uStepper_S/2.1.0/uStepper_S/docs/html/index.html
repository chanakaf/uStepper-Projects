<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uStepper S: Arduino library for the uStepper S Board</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uStepper S
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Arduino library for the uStepper S Board </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the uStepper S Arduino library, providing software functions for the different features of the uStepper S board.</p>
<dl class="section user"><dt>Features</dt><dd>The uStepper S library contains the following features:</dd></dl>
<ul>
<li>Dropin feature for applications like 3D printers</li>
<li>Closed loop PID position controller</li>
<li>Control of RC servo motors</li>
<li>Measure the current position of the shaft (absolute, multiple revolutions)</li>
<li>Measure the current speed of the motor</li>
<li>Stall detection for use in e.g. limit detection functionality</li>
</ul>
<p>The library uses timer 1 in order to function properly, meaning that unless the user of this library can accept the loss of some functionality, this timer is unavailable and the registers associated with these timers should not be reconfigured.</p>
<p>Timer one is used for sampling the encoder in order to provide the ability to keep track of both the current speed and the angle moved since the board was reset (or a new home position was configured). Also the drop-in features missed step detection and correction is done in this timer.</p>
<dl class="section user"><dt>EEPROM Usage information</dt><dd></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd></dd>
<dd>
Please be aware that the uStepper uses the EEPROM to store settings related to the Dropin application. </dd>
<dd>
If you are not using this, then this has no impact for your application, and you can ignore this section ! </dd>
<dd>
</dd>
<dd>
EEPROM address 0 to 15 contains the different settings for dropin. If your application uses the EEPROM, </dd>
<dd>
Please use another location than these !</dd></dl>
<dl class="section user"><dt>Installation</dt><dd>To install the uStepper S library into the Arduino IDE, perform the following steps:</dd></dl>
<ul>
<li>Go to Sketch-&gt;Include Libraries-&gt;Manage Libraries... in the arduino IDE</li>
<li>Search for "uStepper S", in the top right corner of the "Library Manager" window</li>
<li>Install uStepper S library</li>
</ul>
<p>The library is tested with Arduino IDE 1.8.11</p>
<dl class="section warning"><dt>Warning</dt><dd>MAC users should be aware, that OSX does NOT include SILABS VCP drivers, needed to upload sketches to the uStepper S, by default. This driver should be downloaded and installed from SILABS's website: </dd>
<dd>
<a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers</a> </dd>
<dd>
The uStepper S should NOT be connected to the USB port while installing this driver ! </dd>
<dd>
This is not (commonly) a problem for windows/linux users, as these drivers are most often already included in the OS</dd></dl>
<dl class="section user"><dt>Copyright</dt><dd></dd></dl>
<p>(C)2020 uStepper ApS <br  />
</p>
<p>www.ustepper.com <br  />
</p>
<p><a href="#" onclick="location.href='mai'+'lto:'+'adm'+'in'+'ist'+'ra'+'tio'+'n@'+'ust'+'ep'+'per'+'.c'+'om'; return false;">admin<span style="display: none;">.nosp@m.</span>istr<span style="display: none;">.nosp@m.</span>ation<span style="display: none;">.nosp@m.</span>@ust<span style="display: none;">.nosp@m.</span>epper<span style="display: none;">.nosp@m.</span>.com</a> <br  />
</p>
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Creative Commons License" style="border-width:0" class="inline"/> <br  />
</p>
<p>The code contained in this file is released under a <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a></p>
<p>The code in this library is provided without warranty of any kind - use at own risk! <br  />
 neither uStepper ApS nor the author, can be held responsible for any damage <br  />
 caused by the use of the code contained in this library ! <br  />
</p>
<dl class="section user"><dt>Known Bugs</dt><dd><ul>
<li>does not properly release motor in dropin mode</li>
</ul>
</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Thomas HÃ¸rring Olsen (<a href="#" onclick="location.href='mai'+'lto:'+'tho'+'ma'+'s@u'+'st'+'epp'+'er'+'.co'+'m'; return false;">thoma<span style="display: none;">.nosp@m.</span>s@us<span style="display: none;">.nosp@m.</span>teppe<span style="display: none;">.nosp@m.</span>r.co<span style="display: none;">.nosp@m.</span>m</a>) </dd></dl>
<dl class="section user"><dt>Change Log</dt><dd></dd></dl>
<dl class="section version"><dt>Version</dt><dd>2.1.0:<ul>
<li>Fixed checkOrientation to work with Closed loop and dropin modes</li>
<li>Fixed stallguard feature</li>
<li>Modified examples to library update <br  />
 </li>
</ul>
</dd>
<dd>
2.0.0:<ul>
<li>Changed name of "brake()" function in uStepper Class to "setBrakeMode()"</li>
<li>Implemented "setBrakeMode()" function in uStepper Class to choose between freewheel, braking with low side fets shorted and brake with specified hold current. default = brake with low side fets shorted</li>
<li>"setHome" argument of ustepper class "setup" function is now used</li>
<li>Implemented "checkOrientation()" function in uStepper Class, to check the orientation of the motor cable, and invert direction if needed.</li>
<li>Added 3 moves in "checkOrientation()" function in uStepper Class, to check orientation instead of just 1</li>
<li>Removed check for motor cable orientation from "setup()" function in uStepper Class. Users actively needs to call the "checkOrientation" function from uStepper Class, if they need this feature, AFTER calling the "setup()" function</li>
<li>Disabled driver on MCU reset while setting up, to avoid the motor spinning on startup if power was removed during motor movement</li>
<li>Moved the absolute position counter into the encoder getangle function</li>
<li>Added a LP filter on the absolute position data in the encoder function (so, getAngleMoved is filtered)</li>
<li>Stall detection removed from timer1</li>
<li>Variable filter depending on mode set in setup routine</li>
<li>Removed obsolete things in setup routine and timer1</li>
<li>Made new velocity measurement for encoder values</li>
<li>Made the control threshold for closed loop control variable and intrduced a function for editing it</li>
<li>Changed timer1 interrupt frequency to 2KhZ for all other modes than DROPIN</li>
<li>Added option to choose how long the "checkOrientation()" function in UstepperS class should move during check</li>
<li>Renamed "PID" to "CLOSEDLOOP" to avoid confusing the closed loop position mode with a PID controller. PID keyword is stall accepted for backwards compatibility </li>
</ul>
</dd>
<dd>
1.0.1:<ul>
<li>Fixed bug in functions to set acceleration and deceleration</li>
<li>moved a couple of functions in <a class="el" href="uStepperDriver_8h.html" title="Function prototypes and definitions for the TMC5130 motor driver.">uStepperDriver.h</a> from public to protected section of class</li>
<li>added documentation </li>
</ul>
</dd>
<dd>
1.0.0:<ul>
<li>Bug fixes</li>
<li>New Dropin PID code</li>
<li>Added dropin CLI interface</li>
<li>Fixed stall detection, and added user sensitivity parameter </li>
</ul>
</dd>
<dd>
0.1.1:<ul>
<li>Bug fixes </li>
</ul>
</dd>
<dd>
0.1.0: <br  />
<ul>
<li>Initial release </li>
</ul>
</dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 11 2020 15:34:00 for uStepper S by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
